<UserControl x:Class="MiniERP.UI.Views.ReportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource PrimaryBrush}">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="24">
            <!-- Movement Report Section -->
            <Border Background="#243B53" CornerRadius="10" Padding="20" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="ðŸ“Š Stok Hareket Raporu" Foreground="{StaticResource AccentBrush}" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,16"/>
                    
                    <!-- Filters -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <StackPanel Margin="0,0,16,0">
                            <TextBlock Style="{StaticResource FormLabel}" Text="BaÅŸlangÄ±Ã§ Tarihi"/>
                            <DatePicker SelectedDate="{Binding StartDate}" Background="#1A3350" Foreground="White" Width="150"/>
                        </StackPanel>
                        <StackPanel Margin="0,0,16,0">
                            <TextBlock Style="{StaticResource FormLabel}" Text="BitiÅŸ Tarihi"/>
                            <DatePicker SelectedDate="{Binding EndDate}" Background="#1A3350" Foreground="White" Width="150"/>
                        </StackPanel>
                        <StackPanel Margin="0,0,16,0">
                            <TextBlock Style="{StaticResource FormLabel}" Text="Hareket TÃ¼rÃ¼"/>
                            <ComboBox Style="{StaticResource ModernComboBox}" 
                                      ItemsSource="{Binding MovementTypes}"
                                      SelectedItem="{Binding SelectedMovementType}" Width="120"/>
                        </StackPanel>
                        <Button Style="{StaticResource PrimaryButton}" Content="ðŸ“Š Rapor Getir" 
                                Command="{Binding LoadMovementReportCommand}" VerticalAlignment="Bottom" Margin="0,0,0,0"/>
                    </StackPanel>

                    <!-- Summary Cards -->
                    <UniformGrid Columns="3" Margin="0,0,0,12">
                        <Border Background="#1A3350" CornerRadius="6" Padding="12,8" Margin="0,0,8,0">
                            <StackPanel>
                                <TextBlock Text="Toplam Hareket" Foreground="{StaticResource TextSecondaryBrush}" FontSize="11"/>
                                <TextBlock Text="{Binding TotalMovements}" Foreground="White" FontSize="18" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Border>
                        <Border Background="#1C3D2A" CornerRadius="6" Padding="12,8" Margin="0,0,8,0">
                            <StackPanel>
                                <TextBlock Text="GiriÅŸ Toplam" Foreground="{StaticResource TextSecondaryBrush}" FontSize="11"/>
                                <TextBlock Text="{Binding TotalEntryValue, StringFormat='â‚º{0:N2}'}" Foreground="{StaticResource SuccessBrush}" FontSize="18" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Border>
                        <Border Background="#3D1C1C" CornerRadius="6" Padding="12,8">
                            <StackPanel>
                                <TextBlock Text="Ã‡Ä±kÄ±ÅŸ Toplam" Foreground="{StaticResource TextSecondaryBrush}" FontSize="11"/>
                                <TextBlock Text="{Binding TotalExitValue, StringFormat='â‚º{0:N2}'}" Foreground="{StaticResource DangerBrush}" FontSize="18" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Border>
                    </UniformGrid>

                    <DataGrid ItemsSource="{Binding Movements}" MaxHeight="250">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ÃœrÃ¼n" Binding="{Binding ProductName}" Width="*"/>
                            <DataGridTextColumn Header="TÃ¼r" Binding="{Binding MovementType}" Width="70"/>
                            <DataGridTextColumn Header="Miktar" Binding="{Binding Quantity}" Width="70"/>
                            <DataGridTextColumn Header="Birim â‚º" Binding="{Binding UnitPrice, StringFormat='{}{0:N2}'}" Width="80"/>
                            <DataGridTextColumn Header="Toplam â‚º" Binding="{Binding TotalPrice, StringFormat='{}{0:N2}'}" Width="90"/>
                            <DataGridTextColumn Header="AÃ§Ä±klama" Binding="{Binding Description}" Width="150"/>
                            <DataGridTextColumn Header="Tarih" Binding="{Binding MovementDate, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" Width="130"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>

            <!-- Stock Report Section -->
            <Border Background="#243B53" CornerRadius="10" Padding="20">
                <StackPanel>
                    <TextBlock Text="ðŸ“¦ Stok Durum Raporu" Foreground="{StaticResource AccentBrush}" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,16"/>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                        <StackPanel Margin="0,0,16,0">
                            <TextBlock Style="{StaticResource FormLabel}" Text="Kategori"/>
                            <ComboBox Style="{StaticResource ModernComboBox}"
                                      ItemsSource="{Binding Categories}"
                                      SelectedValue="{Binding SelectedCategoryId}"
                                      SelectedValuePath="Id" DisplayMemberPath="Name" Width="160"/>
                        </StackPanel>
                        <CheckBox Content="Sadece DÃ¼ÅŸÃ¼k Stok" IsChecked="{Binding LowStockOnly}" 
                                  Foreground="White" VerticalAlignment="Bottom" Margin="0,0,16,4"/>
                        <Button Style="{StaticResource PrimaryButton}" Content="ðŸ“¦ Stok Raporu" 
                                Command="{Binding LoadStockReportCommand}" VerticalAlignment="Bottom"/>
                    </StackPanel>

                    <Border Background="#1A3350" CornerRadius="6" Padding="12,8" Margin="0,0,0,12" HorizontalAlignment="Left">
                        <TextBlock Foreground="White" FontSize="13">
                            <Run Text="Toplam Stok DeÄŸeri: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <Run Text="{Binding TotalStockValue, StringFormat='â‚º{0:N2}', Mode=OneWay}" FontWeight="SemiBold" Foreground="{StaticResource SuccessBrush}"/>
                        </TextBlock>
                    </Border>

                    <DataGrid ItemsSource="{Binding StockReport}" MaxHeight="250">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ÃœrÃ¼n" Binding="{Binding Name}" Width="*"/>
                            <DataGridTextColumn Header="Barkod" Binding="{Binding Barcode}" Width="100"/>
                            <DataGridTextColumn Header="Kategori" Binding="{Binding CategoryName}" Width="100"/>
                            <DataGridTextColumn Header="Stok" Binding="{Binding CurrentStock}" Width="60"/>
                            <DataGridTextColumn Header="Min" Binding="{Binding MinStockLevel}" Width="50"/>
                            <DataGridTextColumn Header="AlÄ±ÅŸ â‚º" Binding="{Binding PurchasePrice, StringFormat='{}{0:N2}'}" Width="80"/>
                            <DataGridTextColumn Header="SatÄ±ÅŸ â‚º" Binding="{Binding SalePrice, StringFormat='{}{0:N2}'}" Width="80"/>
                            <DataGridTextColumn Header="Stok DeÄŸeri" Binding="{Binding StockValue, StringFormat='â‚º{0:N2}'}" Width="100"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>

            <TextBlock Text="{Binding StatusMessage}" Foreground="{StaticResource WarningBrush}" 
                       TextWrapping="Wrap" Margin="0,12,0,0" FontSize="12"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>
